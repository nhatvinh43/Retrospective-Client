(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{222:function(e,t,n){},224:function(e,t,n){},267:function(e,t,n){},274:function(e,t,n){},281:function(e,t,n){},287:function(e,t,n){},326:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},416:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),s=n(20),c=n.n(s),o=(n(222),n(2)),i=n(11),u=n.n(i),d=n(32),l=n(5),j=n(430),p=n(417),b=n(215),h=n(418),m=n(94),f=n(59),O=n(54),x=n(420),g=n(427),v=n(428),y=(n(224),n(424)),w=n(425),k=function(e){return Object(a.jsx)(p.a,{children:Object(a.jsx)(y.a,{footer:[],centered:!0,visible:e.isModalOpened,onCancel:e.onCancel,children:Object(a.jsx)(w.a,{className:"result",status:e.status,title:e.title,subTitle:e.subTitle,extra:[Object(a.jsx)(O.a,{type:"text",onClick:e.onCancel,children:"Cancel"},"cancel"),Object(a.jsx)(O.a,{type:"dashed",danger:!0,shape:"round",onClick:e.onConfirm,children:e.confirmLabel},"console")]})})})},C=n.p+"static/media/board-avt.d9d9b4dc.jpg",N=(n(267),function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],o=new Date(e.board.created).toDateString();return Object(a.jsxs)(p.a,{children:[Object(a.jsx)(x.a,{title:e.board.name,className:"card",style:{width:280,height:290},hoverable:"true",extra:o,cover:Object(a.jsx)("img",{alt:"avatar",src:C}),actions:[Object(a.jsx)(g.a,{onClick:function(t){t.stopPropagation(),navigator.clipboard.writeText("https://nhatvinh43.github.io/Retrospective-Client/#/boards/"+e.board._id),b.a.success({message:"Board URL copied to clipboard!",duration:1.5,placement:"bottomLeft"})}},"share"),Object(a.jsx)(v.a,{onClick:function(e){e.stopPropagation(),c(!0)}},"delete")]}),Object(a.jsx)(k,{isModalOpened:s,status:"error",title:"Delete this board?",subtitle:"This cannot be undone!",confirmLabel:"Delete",onConfirm:function(t){t.stopPropagation(),e.onConfirm(),c(!1)},onCancel:function(e){e.stopPropagation(),c(!1)}})]})}),T=(n(274),n(426)),P=n(429),S=function(e){return Object(a.jsx)(p.a,{children:Object(a.jsx)(y.a,{footer:[],centered:!0,visible:e.isModalOpened,onCancel:e.onCancel,children:Object(a.jsx)(w.a,{title:"New board",className:"result",status:e.status,icon:Object(a.jsx)(P.a,{style:{fontSize:60}}),extra:[Object(a.jsx)(T.a,{id:"newBoardName",size:"large",allowClear:"true",placeholder:"New board name",onChange:e.onChange,onPressEnter:e.onConfirm,value:e.newBoardName}),Object(a.jsx)(O.a,{id:"addNewBoardButton",type:"primary",shape:"round",onClick:e.onConfirm,children:"Create"})]})})})},L=(n(281),p.a.Content);var I=function(e){var t=e.token,n=Object(r.useState)(e.isLogin),s=Object(l.a)(n,2),c=(s[0],s[1],Object(r.useState)(!1)),o=Object(l.a)(c,2),i=o[0],g=o[1],v=Object(r.useState)([]),y=Object(l.a)(v,2),w=y[0],k=y[1],C=Object(r.useState)(!0),T=Object(l.a)(C,2),P=T[0],I=T[1],D=Object(r.useState)(!1),A=Object(l.a)(D,2),J=A[0],E=A[1],_=Object(r.useState)(""),z=Object(l.a)(_,2),B=z[0],U=z[1],q=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=3;break}return E(!1),e.abrupt("return");case 3:return g(!0),E(!1),U(""),e.next=8,fetch("https://retrospective-server-1712914.herokuapp.com/boards/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+t},body:JSON.stringify({name:B,created:new Date})});case 8:return n=e.sent,e.next=11,n.json();case 11:a=e.sent,200===n.status?((r=w.slice()).unshift(a),k(r),b.a.success({message:"Board creation successful!",duration:1.5,placement:"bottomLeft"})):b.a.error({message:a.message,duration:1.5,placement:"bottomLeft"}),g(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){document.title="Dashboard",t||e.history.push("/user"),function(){var e=Object(d.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/boards",{method:"GET",headers:{Authorization:"JWT "+t}});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,400!==n.status&&k(a.data),I(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(a.jsx)(p.a,{className:"layoutH",children:Object(a.jsxs)(L,{className:"bodyH",children:[Object(a.jsx)(h.a,{size:"large",spinning:i,className:"spin",children:Object(a.jsxs)(m.a,{gutter:[16,16],align:"middle",justify:"center",children:[Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(O.a,{type:"dashed",id:"addBoardBtn",shape:"round ",onClick:function(){return E(!0)},children:Object(a.jsx)(j.a,{style:{fontSize:30}},"newBoard")})}),w.map((function(n){return Object(a.jsx)(f.a,{className:"gutter-row",onClick:function(){e.history.push("/boards/"+n._id)},children:Object(a.jsx)(N,{board:n,onConfirm:function(){return e=n._id,g(!0),fetch("https://retrospective-server-1712914.herokuapp.com/boards/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT "+t},body:JSON.stringify({_id:e})}).then((function(e){return e.json()})).then((function(t){if(t.ok){var n=w.slice(),a=w.findIndex((function(t){return t._id===e}));a>=0&&(n.splice(a,1),k(n)),b.a.success({message:"Board successfully deleted!",duration:1.5,placement:"bottomLeft"})}else b.a.error({message:"Board deletion failed!",duration:1.5,placement:"bottomLeft"})})),void g(!1);var e}},n._id)})})),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(x.a,{style:{width:300},className:P?"":"hidden",loading:P})}),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(x.a,{style:{width:300},className:P?"":"hidden",loading:P})}),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(x.a,{style:{width:300},className:P?"":"hidden",loading:P})}),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(x.a,{style:{width:300},className:P?"":"hidden",loading:P})}),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(x.a,{style:{width:300},className:P?"":"hidden",loading:P})})]})}),Object(a.jsx)(S,{isModalOpened:J,onCancel:function(){E(!1),U("")},onConfirm:q,onChange:function(){var e=document.querySelector("#newBoardName").value;U(e)},newBoardName:B})]})})},D=n(423),A=n(109),J=n(431),E=(n(287),D.a.Title),_=T.a.TextArea,z=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),s=n[0],c=n[1],i=function(t,n){e.toggleInput(t,n),c("")};return Object(a.jsxs)(f.a,{xs:24,md:24,lg:8,xl:8,className:"col",children:[Object(a.jsxs)(E,{level:3,children:[" ",e.name," "]}),Object(a.jsx)(P.a,{className:"addIcons",style:{color:e.color},onClick:function(){return i(e.title,"")}}),Object(a.jsxs)("div",{id:e.title+"Input",className:"hidden",children:[Object(a.jsx)(_,{className:"textarea",value:s,onChange:function(e){c(e.target.value)},id:e.title+"Text",bordered:"false",rows:3,autoSize:{minRows:3,maxRows:5}}),Object(a.jsxs)(m.a,{gutter:[24],justify:"center",children:[Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(O.a,{type:"dashed",shape:"round",style:{backgroundColor:"transparent"},onClick:function(){return e.handleAddPost(e.title)},icon:Object(a.jsx)(P.a,{style:{color:e.color}}),children:"Add"})}),Object(a.jsx)(f.a,{className:"gutter-row",children:Object(a.jsx)(O.a,{type:"text",icon:Object(a.jsx)(J.a,{style:{color:"#e91e63"}}),onClick:function(){i(e.title,"hidden")},children:"Cancel"})})]})]}),Object(a.jsx)(x.a,{style:{width:300},className:e.loading?"":"hidden",loading:e.loading}),e.board[e.title]?Object(a.jsx)(A.c,{droppableId:e.title,children:function(t,n){return Object(a.jsxs)("div",Object(o.a)(Object(o.a)({},t.droppableProps),{},{ref:t.innerRef,className:n.isDraggingOver?"highlight":"",isDraggingOver:n.isDraggingOver,children:[e.board[e.title].map((function(t,n){return Object(a.jsx)(A.b,{draggableId:t._id,index:n,children:function(n){return Object(a.jsx)("div",Object(o.a)(Object(o.a)(Object(o.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:Object(a.jsx)(x.a,{hoverable:!0,className:"card",actions:[Object(a.jsx)(J.a,{onClick:function(){return e.handleDeletePost(t._id,e.title)}},"delete")],children:Object(a.jsx)(E,{editable:{onChange:function(n){e.handleUpdatePost(t._id,n,e.title)}},level:5,children:t.content})})}))}},t._id)})),t.placeholder]}))}}):Object(a.jsx)("div",{})]})},B=n(204),U=n.n(B)()("https://retrospective-server-1712914.herokuapp.com"),q=(n(326),p.a.Content),F=D.a.Title;n(327).config();var R=function(e){var t=e.match.params.id,n=Object(r.useState)({}),s=Object(l.a)(n,2),c=s[0],i=s[1],j=Object(r.useState)(!1),f=Object(l.a)(j,2),O=f[0],x=f[1],g=Object(r.useState)(!1),v=Object(l.a)(g,2),y=v[0],w=v[1],k=e.token,C=function(e){e&&(U.emit("boardChanged",Object(o.a)(Object(o.a)({},e),{},{updatedOn:(new Date).getTime()})),i(e))},N=function(){var e=Object(d.a)(u.a.mark((function e(n,a,r){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch("https://retrospective-server-1712914.herokuapp.com/posts/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+k},body:JSON.stringify({_id:n,boardID:t,target:r,content:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:c=e.sent,200===s.status?(b.a.success({message:"Post updated",duration:1.5,placement:"bottomLeft"}),C(c)):b.a.error({message:"Post update failed",duration:1.5,placement:"bottomLeft"}),w(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(n,a){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch("https://retrospective-server-1712914.herokuapp.com/posts/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT "+k},body:JSON.stringify({_id:n,boardID:t,target:a})});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,200===r.status?(b.a.success({message:"Post deleted",duration:1.5,placement:"bottomLeft"}),C(s)):b.a.error({message:"Post deletion failed",duration:1.5,placement:"bottomLeft"}),w(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(u.a.mark((function e(n){var a,r,s,o,i,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),a=document.querySelector("#"+n+"Text"),r=document.querySelector("#"+n+"Input"),s=a.value,a.value="",r.className="hidden",s){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,fetch("https://retrospective-server-1712914.herokuapp.com/posts/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+k},body:JSON.stringify({content:s,created:new Date,boardID:t,target:n})});case 10:return o=e.sent,e.next=13,o.json();case 13:i=e.sent,200===o.status||304===o.status?(b.a.success({message:"Post added successfully",duration:1.5,placement:"bottomLeft"}),d={},c&&(d=Object.assign(d,c)),l={_id:i._id,content:i.content},d[n].unshift(l),C(d)):b.a.error({message:"Adding post failed",duration:1.5,placement:"bottomLeft"}),w(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch("https://retrospective-server-1712914.herokuapp.com/boards/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+k},body:JSON.stringify(Object(o.a)(Object(o.a)({},c),{},{name:t,lastModified:(new Date).getTime()}))});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,200===n.status||304===n.status?(b.a.success({message:"Board name changed to "+a.name,duration:1.5,placement:"bottomLeft"}),document.title=a.name,C(a)):b.a.error({message:"Cannot change board name ",duration:1.5,placement:"bottomLeft"}),w(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,fetch("https://retrospective-server-1712914.herokuapp.com/boards/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+k},body:JSON.stringify(Object(o.a)(Object(o.a)({},t),{},{lastModified:(new Date).getTime()}))});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,200===n.status?(b.a.success({message:"Board updated",duration:1.5,placement:"bottomLeft"}),C(a)):b.a.error({message:"Board update failed",duration:1.5,placement:"bottomLeft"}),w(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return k||e.history.push("/user"),U.on("boardChanged",(function(e){e._id===t&&i(e)})),x(!0),function(){var e=Object(d.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/boards/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT "+k}});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,200!==n.status&&304!==n.status||(document.title=a.name,U.emit("joinRoom",a._id),i(a),x(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){U.off("boardChanged",(function(){}))}}),[]);var I=function(e,t){var n=document.querySelector("#"+e+"Input");document.querySelector("#"+e+"Text").value="",n.className=t};return Object(a.jsx)(p.a,{className:"layout",children:Object(a.jsx)(h.a,{className:"spin",size:"large",spinning:y,children:Object(a.jsxs)(q,{className:"body",children:[Object(a.jsx)(F,{editable:{onChange:S},level:2,children:c.name}),Object(a.jsx)(m.a,{gutter:[16,16],className:"row",justify:"center",align:"top",style:{textAlign:"center"},children:Object(a.jsxs)(A.a,{onDragEnd:function(e){if(e.destination){var t=e.source.index,n=e.destination.index,a=e.source.droppableId,r=e.destination.droppableId;if(a!==r||t!==n){var s={};Object.assign(s,c);var o=s[a].splice(t,1),i=Object(l.a)(o,1)[0];s[r].splice(n,0,i),L(s)}}},children:[Object(a.jsx)(z,{loading:O,name:"Went Well",title:"wentWell",color:"#009688",toggleInput:I,handleAddPost:P,board:c,handleDeletePost:T,handleUpdatePost:N}),Object(a.jsx)(z,{loading:O,name:"To Improve",title:"toImprove",color:"#e91e63",toggleInput:I,handleAddPost:P,board:c,handleDeletePost:T,handleUpdatePost:N}),Object(a.jsx)(z,{loading:O,name:"Actions",title:"actions",color:"#9c27b0",toggleInput:I,handleAddPost:P,board:c,handleDeletePost:T,handleUpdatePost:N})]})})]})})})},W=(n(330),n(36)),G=n(422),M=n(421),H=n(419),V=n(432),K=(n(331),n(74)),Q=(p.a.Header,function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(r.useState)(!1),j=Object(l.a)(i,2),p=j[0],b=j[1],m=e.visibility,f=G.a.useForm(),x=Object(l.a)(f,1)[0],g=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),c(!0),t.next=4,e.handleGetUser();case 4:n=t.sent,x.setFieldsValue(Object(o.a)(Object(o.a)({},n),{},{dob:K(n.dob)})),b(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(M.a,{title:"Retrospective",className:m?"header":"hidden",extra:[Object(a.jsx)(O.a,{type:"primary",shape:"round",onClick:function(){return g()},icon:Object(a.jsx)(V.a,{},"user"),children:"Account "}),Object(a.jsx)(O.a,{type:"dashed",shape:"round",onClick:e.handleLogout,children:"Logout "})]}),Object(a.jsx)(h.a,{className:"spin",spinning:p,size:"default",children:Object(a.jsxs)(y.a,{centered:!0,visible:s,footer:[],onCancel:function(){c(!1)},children:[Object(a.jsx)("h1",{children:"Account"}),Object(a.jsxs)(G.a,{form:x,className:"form",name:"login",initialValues:{remember:!1},onFinish:function(t){return function(t){b(!0),e.handleUpdateUser(t),c(!1),b(!1)}(t)},children:[Object(a.jsx)(G.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Email"})}),Object(a.jsx)(G.a.Item,{name:"name",label:"Full name",rules:[{required:!0,message:"Please input your full name!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Full name"})}),Object(a.jsx)(G.a.Item,{name:"dob",label:"Date of birth",rules:[{required:!0,message:"Please input your dob!"}],children:Object(a.jsx)(H.a,{})}),Object(a.jsx)(O.a,{type:"primary",shape:"round",htmlType:"submit",children:"Update"})]})]})})]})}),X=n(433),Y=n(434),Z=(n(411),function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(!1),i=Object(l.a)(o,2),u=i[0],d=i[1];Object(r.useEffect)((function(){document.title="Account",e.token&&e.history.push("/dashboard")}),[]);var j=function(){c(!1),d(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(w.a,{className:"main",status:"404",title:"Retrospective Manager",subTitle:"Login or register to get started!",extra:Object(a.jsxs)("div",{children:[Object(a.jsxs)(m.a,{justify:"center",gutter:[24,24],children:[Object(a.jsx)(f.a,{children:Object(a.jsx)(O.a,{type:"dashed",shape:"round",onClick:function(){c(!0)},children:"Login"})}),Object(a.jsx)(f.a,{children:Object(a.jsx)(O.a,{type:"primary",shape:"round",onClick:function(){d(!0)},children:"Register"})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)(m.a,{justify:"center",gutter:[24,24],children:[Object(a.jsx)(f.a,{children:Object(a.jsx)(O.a,{type:"primary",shape:"round",danger:!0,icon:Object(a.jsx)(X.a,{onClick:e.handleGoogleLogin}),onClick:e.handleGoogleLogin})}),Object(a.jsx)(f.a,{children:Object(a.jsx)(O.a,{type:"primary",shape:"round",icon:Object(a.jsx)(Y.a,{onClick:e.handleFacebookLogin}),onClick:e.handleFacebookLogin})})]})]})}),Object(a.jsxs)(y.a,{className:"modal",visible:s,centered:!0,onCancel:function(){return j()},footer:[],children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{className:"form",name:"login",initialValues:{remember:!1},onFinish:e.handleLogin,children:[Object(a.jsx)(G.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Username"})}),Object(a.jsx)(G.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(a.jsx)(T.a.Password,{className:"input",placeholder:"Password"})}),Object(a.jsx)(O.a,{type:"primary",shape:"round",htmlType:"submit",children:"Login"})]})]}),Object(a.jsxs)(y.a,{className:"modal",visible:u,centered:!0,onCancel:function(){return j()},footer:[],children:[Object(a.jsx)("h1",{children:"Register"}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{className:"form",name:"register",initialValues:{remember:!1},onFinish:e.handleRegister,children:[Object(a.jsx)(G.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Username"})}),Object(a.jsx)(G.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Email"})}),Object(a.jsx)(G.a.Item,{name:"fullname",rules:[{required:!0,message:"Please input your full name!"}],children:Object(a.jsx)(T.a,{className:"input",placeholder:"Full name"})}),Object(a.jsx)(G.a.Item,{name:"dob",label:"Date of birth",rules:[{required:!0,message:"Please input your dob!"}],children:Object(a.jsx)(H.a,{})}),Object(a.jsx)(G.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(a.jsx)(T.a.Password,{className:"input",placeholder:"Password"})}),Object(a.jsx)(G.a.Item,{name:"password_confirm",rules:[{required:!0,message:"Please input your confirm password!"}],children:Object(a.jsx)(T.a.Password,{className:"input",placeholder:"Confirm password"})}),Object(a.jsx)(O.a,{type:"primary",shape:"round",htmlType:"submit",children:"Register"})]})]})]})}),$=(n(412),function(e){return Object(r.useEffect)((function(){(function(){var t=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/auth/success",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,200===n.status||304===n.status?(console.log(a),e.setIsLogin(!0),localStorage.setItem("token",a.token),e.setToken(a.token),e.history.push("/dashboard")):e.history.push("/");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(a.jsx)("div",{})});var ee=function(){var e=Object(W.g)(),t=Object(r.useState)(localStorage.getItem("token")),n=Object(l.a)(t,2),s=n[0],c=n[1],i=Object(r.useState)(!1),j=Object(l.a)(i,2),p=j[0],h=j[1],m=Object(r.useState)(!1),f=Object(l.a)(m,2),O=f[0],x=f[1],g=Object(r.useState)(!1),v=Object(l.a)(g,2),y=(v[0],v[1]),w=Object(r.useState)(!1),k=Object(l.a)(w,2),C=(k[0],k[1]);Object(r.useEffect)((function(){s&&x(!0)}),[]);var N=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://retrospective-server-1712914.herokuapp.com/auth/google","_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://retrospective-server-1712914.herokuapp.com/auth/facebook","_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=Object(d.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password})});case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,200!==a.status?b.a.error({message:r.message,duration:1.5,placement:"bottomLeft"}):(localStorage.setItem("token",r.token),c(r.token),x(!0),y(!1),e.push("/dashboard"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email,name:t.fullname,dob:t.dob,password:t.password,password_confirm:t.password_confirm})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,400===n.status?b.a.error({message:a.message,duration:1.5,placement:"bottomLeft"}):(b.a.success({message:a.message,duration:1.5,placement:"bottomLeft"}),C(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT "+s}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=11;break}return b.a.error({message:n.message,duration:1.5,placement:"bottomLeft"}),e.abrupt("return",{});case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://retrospective-server-1712914.herokuapp.com/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+s},body:JSON.stringify(Object(o.a)({},t))});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,200===n.status?(b.a.success({message:"Account info updated",duration:1.5,placement:"bottomLeft"}),console.log(a)):b.a.error({message:"Account info update failed",duration:1.5,placement:"bottomLeft"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(Q,{handleUpdateUser:D,handleGetUser:L,history:e,handleHistory:function(t){e.push(t),t.size>1&&h(!0)},back:p,handleLogout:function(){localStorage.removeItem("token"),c(""),e.push("/user"),x(!1)},visibility:O}),Object(a.jsxs)(W.d,{children:[Object(a.jsx)(W.b,{exact:!0,path:"/dashboard",render:function(e){return Object(a.jsx)(I,Object(o.a)({token:s},e))}}),Object(a.jsx)(W.b,{path:"/boards/:id",render:function(e){return Object(a.jsx)(R,Object(o.a)({token:s},e))}}),Object(a.jsx)(W.b,{exact:!0,path:"/user",render:function(e){return Object(a.jsx)(Z,Object(o.a)(Object(o.a)({token:s},e),{},{handleFacebookLogin:T,handleGoogleLogin:N,isLogin:O,handleLoginState:x,handleLogin:P,handleRegister:S}))}}),Object(a.jsx)(W.b,{path:"/auth/success",render:function(e){return Object(a.jsx)($,Object(o.a)(Object(o.a)({},e),{},{setToken:c,setIsLogin:x}))}}),Object(a.jsx)(W.b,{exact:!0,path:"/",children:Object(a.jsx)(W.a,{to:"/dashboard"})})]})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},ne=n(99);c.a.render(Object(a.jsx)(ne.a,{children:Object(a.jsx)(ee,{})}),document.getElementById("root")),te()}},[[416,1,2]]]);
//# sourceMappingURL=main.c2125ee3.chunk.js.map