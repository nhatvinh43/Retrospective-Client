(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{190:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},243:function(e,t,a){},250:function(e,t,a){},267:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(0),r=a(15),c=a.n(r),o=(a(190),a(2)),i=a(18),l=a.n(i),d=a(35),u=a(5),j=a(360),h=a(351),b=a(183),m=a(89),p=a(57),f=a(61),O=a(353),x=a(34),g=(a(192),a(365)),y=a(364),v=a(363),w=(a(193),a(356)),N=a(359),C=function(e){return Object(n.jsx)(h.a,{children:Object(n.jsx)(w.a,{footer:[],centered:!0,visible:e.isModalOpened,onCancel:e.onCancel,children:Object(n.jsx)(N.a,{className:"result",status:e.status,title:e.title,subTitle:e.subTitle,extra:[Object(n.jsx)(f.a,{type:"text",onClick:e.onCancel,children:"Cancel"},"cancel"),Object(n.jsx)(f.a,{type:"dashed",danger:!0,shape:"round",onClick:e.onConfirm,children:e.confirmLabel},"console")]})})})},P=a.p+"static/media/board-avt.d9d9b4dc.jpg",T=function(e){var t=Object(s.useState)(!1),a=Object(u.a)(t,2),r=a[0],c=a[1],o=new Date(e.board.created).toDateString();return Object(n.jsxs)(h.a,{children:[Object(n.jsx)(O.a,{title:e.board.name,className:"card",style:{width:280,height:290},hoverable:"true",extra:o,cover:Object(n.jsx)("img",{alt:"avatar",src:P}),actions:[Object(n.jsx)(g.a,{},"share"),Object(n.jsx)(y.a,{},"clone"),Object(n.jsx)(v.a,{onClick:function(e){e.stopPropagation(),c(!0)}},"delete")]}),Object(n.jsx)(C,{isModalOpened:r,status:"error",title:"Delete this board?",subtitle:"This cannot be undone!",confirmLabel:"Delete",onConfirm:function(t){t.stopPropagation(),e.onConfirm(),c(!1)},onCancel:function(e){e.stopPropagation(),c(!1)}})]})},S=(a(243),a(358)),k=a(362),L=function(e){return Object(n.jsx)(h.a,{children:Object(n.jsx)(w.a,{footer:[],centered:!0,visible:e.isModalOpened,onCancel:e.onCancel,children:Object(n.jsx)(N.a,{title:"New board",className:"result",status:e.status,icon:Object(n.jsx)(k.a,{style:{fontSize:60}}),extra:[Object(n.jsx)(S.a,{id:"newBoardName",size:"large",allowClear:"true",placeholder:"New board name",onChange:e.onChange,onPressEnter:e.onConfirm,value:e.newBoardName}),Object(n.jsx)(f.a,{id:"addNewBoardButton",type:"primary",shape:"round",onClick:e.onConfirm,children:"Create"})]})})})},I=(a(250),h.a.Content);var A=function(e){var t=localStorage.getItem("token"),a=Object(s.useState)(e.isLogin),r=Object(u.a)(a,2),c=r[0],o=(r[1],Object(x.g)(),Object(s.useState)([])),i=Object(u.a)(o,2),g=i[0],y=i[1],v=Object(s.useState)(!0),w=Object(u.a)(v,2),N=w[0],C=w[1],P=Object(s.useState)(!1),S=Object(u.a)(P,2),k=S[0],A=S[1],J=Object(s.useState)(""),D=Object(u.a)(J,2),_=D[0],B=D[1],z=function(){var e=Object(d.a)(l.a.mark((function e(){var a,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return A(!1),e.abrupt("return");case 3:return e.next=5,fetch("http://localhost:8080/boards/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+t},body:JSON.stringify({name:_,created:new Date})});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,200===a.status?((s=g.slice()).unshift(n),y(s),b.a.success({message:"Board creation successful!",duration:1.5,placement:"bottomLeft"})):b.a.error({message:n.message,duration:1.5,placement:"bottomLeft"}),A(!1),B("");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){t||e.history.push("/user"),function(){var e=Object(d.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/boards",{method:"GET",headers:{Authorization:"JWT "+t}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,400!==a.status&&y(n.data),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[c]),Object(n.jsx)(h.a,{className:"layout",children:Object(n.jsxs)(I,{className:"body",children:[Object(n.jsxs)(m.a,{gutter:[16,16],align:"middle",justify:"center",children:[Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(f.a,{type:"dashed",id:"addBoardBtn",shape:"round ",onClick:function(){return A(!0)},children:Object(n.jsx)(j.a,{style:{fontSize:30}},"newBoard")})}),g.map((function(a){return Object(n.jsx)(p.a,{className:"gutter-row",onClick:function(){e.history.push("/boards/"+a._id)},children:Object(n.jsx)(T,{board:a,onConfirm:function(){return e=a._id,void fetch("http://localhost:8080/boards/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT "+t},body:JSON.stringify({_id:e})}).then((function(e){return e.json()})).then((function(t){if(t.ok){var a=g.slice(),n=g.findIndex((function(t){return t._id===e}));n>=0&&(a.splice(n,1),y(a)),b.a.success({message:"Board successfully deleted!",duration:1.5,placement:"bottomLeft"})}else b.a.error({message:"Board deletion failed!",duration:1.5,placement:"bottomLeft"})}));var e}},a._id)})})),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(O.a,{style:{width:300},className:N?"":"hidden",loading:N})}),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(O.a,{style:{width:300},className:N?"":"hidden",loading:N})}),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(O.a,{style:{width:300},className:N?"":"hidden",loading:N})}),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(O.a,{style:{width:300},className:N?"":"hidden",loading:N})}),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(O.a,{style:{width:300},className:N?"":"hidden",loading:N})})]}),Object(n.jsx)(L,{isModalOpened:k,onCancel:function(){A(!1),B("")},onConfirm:z,onChange:function(){var e=document.querySelector("#newBoardName").value;B(e)},newBoardName:_})]})})},J=a(355),D=a(178),_=a(361),B=J.a.Title,z=(J.a.Text,J.a.Paragraph,S.a.TextArea),E=function(e){return Object(n.jsxs)(p.a,{span:7,className:"col",children:[Object(n.jsxs)(B,{level:3,children:[" ",e.name," "]}),Object(n.jsx)(k.a,{className:"addIcons",style:{color:e.color},onClick:function(){return e.toggleInput(e.title,"")}}),Object(n.jsxs)("div",{id:e.title+"Input",className:"hidden",children:[Object(n.jsx)(z,{className:"textarea",id:e.title+"Text",bordered:"false",rows:3,autoSize:{minRows:3,maxRows:5}}),Object(n.jsxs)(m.a,{gutter:[24],justify:"center",children:[Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(f.a,{type:"dashed",shape:"round",style:{backgroundColor:"transparent"},onClick:function(){return e.handleAddPost(e.title)},icon:Object(n.jsx)(k.a,{style:{color:e.color}}),children:"Add"})}),Object(n.jsx)(p.a,{className:"gutter-row",children:Object(n.jsx)(f.a,{type:"text",icon:Object(n.jsx)(_.a,{style:{color:"#e91e63"}}),onClick:function(){e.toggleInput(e.title,"hidden")},children:"Cancel"})})]})]}),e.board[e.title]?e.board[e.title].map((function(t){return Object(n.jsx)(O.a,{hoverable:!0,className:"card",actions:[Object(n.jsx)(_.a,{onClick:function(){return e.handleDeletePost(t._id,e.title)}},"delete")],children:Object(n.jsx)(B,{editable:{onChange:function(a){e.handleUpdatePost(t._id,a,e.title)}},level:5,children:t.content})},t._id)})):""]})},q=(a(267),h.a.Header,h.a.Footer,h.a.Content),W=J.a.Title;J.a.Text,J.a.Paragraph,S.a.TextArea,O.a;a(268).config();var F=function(e){var t=Object(s.useState)({}),a=Object(u.a)(t,2),r=a[0],c=a[1],o=Object(s.useState)(!1),i=Object(u.a)(o,2),j=(i[0],i[1],e.match.params.id),p=localStorage.getItem("token"),f=function(){var e=Object(d.a)(l.a.mark((function e(t,a,n){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/posts/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+p},body:JSON.stringify({_id:t,boardID:j,target:n,content:a})});case 2:return s=e.sent,e.next=5,s.json();case 5:r=e.sent,200===s.status?(b.a.success({message:"Post updated",duration:1.5,placement:"bottomLeft"}),console.log(r),c(r)):b.a.error({message:"Post update failed",duration:1.5,placement:"bottomLeft"});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/posts/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT "+p},body:JSON.stringify({_id:t,boardID:j,target:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,200===n.status?(b.a.success({message:"Post deleted",duration:1.5,placement:"bottomLeft"}),c(s)):b.a.error({message:"Post deletion failed",duration:1.5,placement:"bottomLeft"});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,s,o,i,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.querySelector("#"+t+"Text"),n=document.querySelector("#"+t+"Input"),s=a.value,a.value="",n.className="hidden",s){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,fetch("http://localhost:8080/posts/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT "+p},body:JSON.stringify({content:s,created:new Date,boardID:j,target:t})});case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,200===o.status||304===o.status?(b.a.success({message:"Post added successfully",duration:1.5,placement:"bottomLeft"}),d={},r&&(d=Object.assign(d,r)),u={_id:i._id,content:i.content},d[t].unshift(u),c(d)):b.a.error({message:"Adding post failed",duration:1.5,placement:"bottomLeft"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/boards/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"JWT "+p},body:JSON.stringify({_id:j,name:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,200===a.status||304===a.status?(b.a.success({message:"Board name changed to "+n.name,duration:1.5,placement:"bottomLeft"}),c(n)):b.a.error({message:"Cannot change board name ",duration:1.5,placement:"bottomLeft"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){p||e.history.push("/user"),function(){var e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/boards/"+j,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT "+p}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,200!==t.status&&304!==t.status||c(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var y=function(e,t){var a=document.querySelector("#"+e+"Input");document.querySelector("#"+e+"Text").value="",a.className=t};return Object(n.jsx)(h.a,{className:"layout",children:Object(n.jsxs)(q,{className:"body",children:[Object(n.jsx)(W,{editable:{onChange:g},level:2,children:r.name}),Object(n.jsx)(D.a,{children:Object(n.jsxs)(m.a,{gutter:[16,16],justify:"center",align:"top",style:{textAlign:"center"},children:[Object(n.jsx)(E,{name:"Went Well",title:"wentWell",color:"#009688",toggleInput:y,handleAddPost:x,board:r,handleDeletePost:O,handleUpdatePost:f}),Object(n.jsx)(E,{name:"To Improve",title:"toImprove",color:"#e91e63",toggleInput:y,handleAddPost:x,board:r,handleDeletePost:O,handleUpdatePost:f}),Object(n.jsx)(E,{name:"Actions",title:"actions",color:"#9c27b0",toggleInput:y,handleAddPost:x,board:r,handleDeletePost:O,handleUpdatePost:f})]})})]})})},U=(a(273),a(357)),R=(a(274),h.a.Header),M=function(e){var t=e.visibility,a="";return t&&(a=Object(n.jsx)(U.a,{theme:"light",mode:"horizontal",className:"header-menu",children:Object(n.jsx)(f.a,{type:"primary",shape:"round",onClick:e.handleLogout,children:"Logout "})})),Object(n.jsx)("div",{children:Object(n.jsxs)(R,{className:t?"header":"hidden",children:[Object(n.jsx)("div",{className:"logo"}),a]})})},H=a(354),G=a(352),V=function(e){var t=Object(s.useState)(!1),a=Object(u.a)(t,2),r=a[0],c=a[1],o=Object(s.useState)(!1),i=Object(u.a)(o,2),l=i[0],d=i[1],j=function(){c(!1),d(!1)};return Object(n.jsxs)("div",{children:[Object(n.jsx)(N.a,{status:"403",title:"Login or register to view your boards!",extra:Object(n.jsxs)(m.a,{justify:"center",gutter:[24,24],children:[Object(n.jsx)(p.a,{children:Object(n.jsx)(f.a,{type:"dashed",shape:"round",onClick:function(){c(!0)},children:"Login"})}),Object(n.jsx)(p.a,{children:Object(n.jsx)(f.a,{type:"primary",shape:"round",onClick:function(){d(!0)},children:"Register"})})]})}),Object(n.jsxs)(w.a,{className:"modal",visible:r,centered:!0,onCancel:function(){return j()},footer:[],children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsx)("br",{}),Object(n.jsxs)(H.a,{className:"form",name:"login",initialValues:{remember:!1},onFinish:e.handleLogin,children:[Object(n.jsx)(H.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(S.a,{className:"input",placeholder:"Username"})}),Object(n.jsx)(H.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(S.a.Password,{className:"input",placeholder:"Password"})}),Object(n.jsx)(f.a,{type:"primary",shape:"round",htmlType:"submit",children:"Login"})]})]}),Object(n.jsxs)(w.a,{className:"modal",visible:l,centered:!0,onCancel:function(){return j()},footer:[],children:[Object(n.jsx)("h1",{children:"Register"}),Object(n.jsx)("br",{}),Object(n.jsxs)(H.a,{className:"form",name:"register",initialValues:{remember:!1},onFinish:e.handleRegister,children:[Object(n.jsx)(H.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(S.a,{className:"input",placeholder:"Username"})}),Object(n.jsx)(H.a.Item,{name:"email",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(S.a,{className:"input",placeholder:"Email"})}),Object(n.jsx)(H.a.Item,{name:"fullname",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(S.a,{className:"input",placeholder:"Full name"})}),Object(n.jsx)(H.a.Item,{name:"dob",label:"Date of birth",rules:[{required:!0,message:"Please input your username!"}],children:Object(n.jsx)(G.a,{})}),Object(n.jsx)(H.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(S.a.Password,{className:"input",placeholder:"Password"})}),Object(n.jsx)(H.a.Item,{name:"password_confirm",rules:[{required:!0,message:"Please input your confirm password!"}],children:Object(n.jsx)(S.a.Password,{className:"input",placeholder:"Confirm password"})}),Object(n.jsx)(f.a,{type:"primary",shape:"round",htmlType:"submit",children:"Register"})]})]})]})};var K=function(){var e=Object(x.g)(),t=localStorage.getItem("token"),a=Object(s.useState)(!1),r=Object(u.a)(a,2),c=r[0],i=r[1],j=Object(s.useState)(!1),h=Object(u.a)(j,2),m=h[0],p=h[1],f=Object(s.useState)(!1),O=Object(u.a)(f,2),g=(O[0],O[1]),y=Object(s.useState)(!1),v=Object(u.a)(y,2),w=(v[0],v[1]);Object(s.useEffect)((function(){t&&p(!0)}));var N=function(){var t=Object(d.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username,password:a.password})});case 2:return n=t.sent,t.next=5,n.json();case 5:s=t.sent,200!==n.status?b.a.error({message:s.message,duration:1.5,placement:"bottomLeft"}):(localStorage.setItem("token",s.token),p(!0),g(!1),e.push("/dashboard"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email,name:t.fullname,dob:t.dob,password:t.password,password_confirm:t.password_confirm})});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,400===a.status?b.a.error({message:n.message,duration:1.5,placement:"bottomLeft"}):(b.a.success({message:n.message,duration:1.5,placement:"bottomLeft"}),w(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{history:e,handleHistory:function(t){e.push(t),t.size>1&&i(!0)},back:c,handleLogout:function(){localStorage.removeItem("token"),e.push("/user"),p(!1)},visibility:m}),Object(n.jsxs)(x.d,{children:[Object(n.jsx)(x.b,{path:"/dashboard",render:function(e){return Object(n.jsx)(A,Object(o.a)({},e))}}),Object(n.jsx)(x.b,{path:"/boards/:id",render:function(e){return Object(n.jsx)(F,Object(o.a)({},e))}}),Object(n.jsx)(x.b,{path:"/user",children:Object(n.jsx)(V,{isLogin:m,handleLoginState:p,handleLogin:N,handleRegister:C})}),Object(n.jsx)(x.b,{path:"/",children:Object(n.jsx)(x.a,{to:"/dashboard"})})]})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,366)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))},X=a(91);c.a.render(Object(n.jsx)(X.a,{children:Object(n.jsx)(K,{})}),document.getElementById("root")),Q()}},[[350,1,2]]]);
//# sourceMappingURL=main.7fe0809b.chunk.js.map